import {GameComponent, Region} from './models/models';
import {TileMap} from './tile_map';
import {TileAtlas} from './tile_atlas';
import * as PIXI from 'pixi.js';
import {GameImage} from './resources';
import {CollisionSystem} from './collision/collision_system';

// prettier-ignore
const TILES = [
 [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
 [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
 [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
 [1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1],
 [1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
 [1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
 [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
 [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
 [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
 [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
 [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
 [1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1],
];

export class World implements GameComponent {
  // public tileMap: TileMap;

  collisionSystem: CollisionSystem;

  constructor(readonly bounds: Region) {
    this.collisionSystem = new CollisionSystem(this.bounds);
    // const atlas = new TileAtlas();
    // atlas.add(0, {
    //   isSolid: false,
    //   resource: GameImage.TILE_FLOOR,
    // });
    // atlas.add(1, {
    //   isSolid: true,
    //   resource: GameImage.TILE_WALL,
    // });
    // this.tileMap = new TileMap({
    //   map: TILES,
    //   tileSize: 32,
    //   atlas,
    // });
  }

  update(delta: number): void {
    // this.tileMap.update(delta);
  }

  render(graphics: PIXI.Graphics): void {
    // this.tileMap.render(graphics);
  }
}
